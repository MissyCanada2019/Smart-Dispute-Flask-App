<!-- Cookie Consent Banner -->
<div id="cookieConsent" class="cookie-consent-banner">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-8">
                <p class="mb-0">
                    <i class="fas fa-cookie-bite me-2"></i>
                    We use cookies and similar technologies to help personalize content, tailor and measure ads, 
                    and provide a better experience. By clicking "Accept All", you consent to our use of cookies. 
                    Visit our <a href="{{ url_for('privacy_policy') }}" class="cookie-link">Privacy Policy</a> to learn more.
                </p>
            </div>
            <div class="col-md-4 text-md-end mt-2 mt-md-0">
                <button id="acceptCookies" class="btn btn-sm btn-primary me-2">Accept All</button>
                <button id="rejectCookies" class="btn btn-sm btn-outline-light">Reject</button>
            </div>
        </div>
    </div>
</div>

<style>
.cookie-consent-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 15px 0;
    z-index: 10000;
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.cookie-link {
    color: #ffcc00;
    text-decoration: underline;
}

.cookie-link:hover {
    color: #ffffff;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const cookieConsent = document.getElementById('cookieConsent');
    const acceptButton = document.getElementById('acceptCookies');
    const rejectButton = document.getElementById('rejectCookies');

    // Check if user has already made a choice
    if (localStorage.getItem('cookieConsent') === null) {
        cookieConsent.style.display = 'block';
    } else {
        cookieConsent.style.display = 'none';
    }

    // Accept cookies
    acceptButton.addEventListener('click', function() {
        localStorage.setItem('cookieConsent', 'accepted');
        cookieConsent.style.display = 'none';
        // Enable analytics tracking
        enableAnalytics();
    });

    // Reject cookies
    rejectButton.addEventListener('click', function() {
        localStorage.setItem('cookieConsent', 'rejected');
        cookieConsent.style.display = 'none';
        // Disable analytics tracking
        disableAnalytics();
    });

    function enableAnalytics() {
        // Placeholder for enabling analytics
        console.log('Analytics enabled');
    }

    function disableAnalytics() {
        // Placeholder for disabling analytics
        console.log('Analytics disabled');
    }
});
</script>
